<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
<meta name="google-site-verification" content="WoeYixr9--6ikwIZxHiYjVfhk2UpqldMqWnPGdyKfBw" />
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"frontendthink.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="青春都一餉，忍把浮名換了代碼輕狂。">
<meta property="og:type" content="website">
<meta property="og:title" content="Philip">
<meta property="og:url" content="https://frontendthink.com/page/13/index.html">
<meta property="og:site_name" content="Philip">
<meta property="og:description" content="青春都一餉，忍把浮名換了代碼輕狂。">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Philip Zhang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://frontendthink.com/page/13/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Philip</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Philip</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Philip's blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://frontendthink.com/2024/11/16/javascript-interview-questions-04/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Philip Zhang">
      <meta itemprop="description" content="青春都一餉，忍把浮名換了代碼輕狂。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Philip">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/11/16/javascript-interview-questions-04/" class="post-title-link" itemprop="url">javascript-interview-questions-04(JS core)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-11-16 18:53:21" itemprop="dateCreated datePublished" datetime="2024-11-16T18:53:21+08:00">2024-11-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-07 21:23:11" itemprop="dateModified" datetime="2025-04-07T21:23:11+08:00">2025-04-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/interview/" itemprop="url" rel="index"><span itemprop="name">interview</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>111</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>1 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Closure"><a href="#Closure" class="headerlink" title="Closure"></a>Closure</h2><h3 id="Use-case-1-cache-data"><a href="#Use-case-1-cache-data" class="headerlink" title="Use case 1: cache data."></a>Use case 1: cache data.</h3><p>In the following example, the inner function <code>getId</code> referenced the variable <code>id</code> in outer function <code>createIdGenerator</code>. The variable <code>id</code> is memorized and each call to <code>generateId</code> will return the next id.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">createIdGenerator</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> id = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> <span class="title function_">getId</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> id++;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> generateId = <span class="title function_">createIdGenerator</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">generateId</span>()); <span class="comment">// 0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">generateId</span>()); <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">generateId</span>()); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<h2 id="event-loop"><a href="#event-loop" class="headerlink" title="event loop"></a>event loop</h2><h2 id="prototype"><a href="#prototype" class="headerlink" title="prototype"></a>prototype</h2><h2 id="this"><a href="#this" class="headerlink" title="this"></a>this</h2><p><code>this</code> in javascript is a very complex concept, and we need a separated post to elaborate it. Here we just give a brief introduction.</p>
<h2 id="promise"><a href="#promise" class="headerlink" title="promise"></a>promise</h2><h2 id="async-await"><a href="#async-await" class="headerlink" title="async&#x2F;await"></a>async&#x2F;await</h2><p>据说async&#x2F;await底层是借助Promise和generator来实现的，有待学习。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://frontendthink.com/2024/11/16/javascript-interview-questions-03/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Philip Zhang">
      <meta itemprop="description" content="青春都一餉，忍把浮名換了代碼輕狂。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Philip">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/11/16/javascript-interview-questions-03/" class="post-title-link" itemprop="url">javascript-interview-questions-03</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-11-16 18:53:18" itemprop="dateCreated datePublished" datetime="2024-11-16T18:53:18+08:00">2024-11-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-07 21:23:05" itemprop="dateModified" datetime="2025-04-07T21:23:05+08:00">2025-04-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/interview/" itemprop="url" rel="index"><span itemprop="name">interview</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>214</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>1 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Primitive-wrapper-objects"><a href="#Primitive-wrapper-objects" class="headerlink" title="Primitive wrapper objects"></a>Primitive wrapper objects</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> s1 = <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&#x27;abc&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> s2 = <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&#x27;abc&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> s3 = <span class="title class_">String</span>(<span class="string">&#x27;abc&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> s4 = <span class="title class_">String</span>(<span class="string">&#x27;abc&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s1 == s2);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s3 == s4);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s1 == s3);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s1 === s3);</span><br></pre></td></tr></table></figure>

<p>Answer:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">false</span></span><br><span class="line"><span class="literal">true</span></span><br><span class="line"><span class="literal">true</span></span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure>
<ul>
<li>s1和s2都是object类型，所以它们的引用地址不同，所以<code>s1 == s2</code>返回<code>false</code>。</li>
<li>s3和s4都是string类型，所以它们的值相同，所以<code>s3 == s4</code>返回<code>true</code>。</li>
<li>s1是object类型，s3是string类型，比较时先将s1转换为primitive类型，也就是字符串类型，所以<code>s1 == s3</code>返回<code>true</code>。</li>
<li>s1是object类型，s3是string类型，所以<code>s1 === s3</code>返回<code>false</code>。<br>关于JavaScript中<code>==</code>的详细规则，请看<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Equality">这里</a></li>
</ul>
<h2 id="输出结果是什么？"><a href="#输出结果是什么？" class="headerlink" title="输出结果是什么？"></a>输出结果是什么？</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">isArray</span>(data));</span><br></pre></td></tr></table></figure>
<p>Answer: <code>false</code><br><code>Uint8Array</code> 是 <code>ArrayBuffer</code> 对象的一个视图，它表示一个8位无符号整数的数组。<code>Uint8Array</code> 实例不是一个数组，所以 <code>Array.isArray(data)</code> 返回 <code>false</code>。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://frontendthink.com/2024/11/16/javascript-interview-questions-02/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Philip Zhang">
      <meta itemprop="description" content="青春都一餉，忍把浮名換了代碼輕狂。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Philip">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/11/16/javascript-interview-questions-02/" class="post-title-link" itemprop="url">javascript-interview-questions-02</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-11-16 18:53:13" itemprop="dateCreated datePublished" datetime="2024-11-16T18:53:13+08:00">2024-11-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-06-14 22:28:03" itemprop="dateModified" datetime="2025-06-14T22:28:03+08:00">2025-06-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/interview/" itemprop="url" rel="index"><span itemprop="name">interview</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>881</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>3 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="var-in-for-loop"><a href="#var-in-for-loop" class="headerlink" title="var in for loop."></a><code>var</code> in for loop.</h2><p>现在是2025年，ES6已经发布快10年了，除了一些基础前端框架外，在常规的业务代码中，我们不应该再使用<code>var</code>了，因为 <code>var</code>有很多的问题：比如变量提升，比如没有块级作用域。我们从一道面试题来分析<code>var</code>的缺点。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">100</span>);</span><br></pre></td></tr></table></figure>
<p>Answer:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">100</span><br><span class="line">5</span><br><span class="line">5</span><br><span class="line">5</span><br><span class="line">5</span><br><span class="line">5</span><br></pre></td></tr></table></figure>
<p>分析：</p>
<ol>
<li>最后一行代码<code>console.log(100);</code>是同步代码，所以会先输出100。</li>
<li>for循环一共执行5次，每次都会调用<code>setTimeout</code>，但是<code>setTimeout</code>是异步代码，JS引擎会将setTimeout的回调函数放到宏任务队列中，等待执行。</li>
<li>当前Event loop执行完毕后，会去执行宏任务队列中的任务，这时候<code>setTimeout</code>的回调函数才会被执行，但是这时候<code>i</code>已经变成了5，所以会输出5个5。</li>
</ol>
<p>所以导致这段代码的问题有二，解决其中任何一个都可以让它输出0, 1, 2, 3, 4。</p>
<ol>
<li>使用了<code>var</code>, <code>var</code>是函数作用域，所以所有的循环都共享一个<code>i</code>。</li>
<li>使用了<code>setTimeout</code>。<code>setTimeout</code>是整个循环结束后才开始执行的！如果我们把<code>setTimeout</code>删除就不会有问题了。以下代码works well!<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>那么是不是不用<code>setTimeout</code>就没有问题了呢？不是的，我们来看这道题的一个变种：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> func = [];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  func.<span class="title function_">push</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func.<span class="title function_">forEach</span>(<span class="function">(<span class="params">f</span>) =&gt;</span> <span class="title function_">f</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">100</span>);</span><br></pre></td></tr></table></figure>
<p>这个变种没有使用<code>setTimeout</code>，但是结果依然是5个5。为什么呢？观察这个变种和原始题目我们可以看到，他们共同的特点都是在<code>for</code>循环结束后才执行代码，此时i的值已经是5了。这才是根本原因。</p>
<p>好了，现在我们来看看如何解决这个问题。</p>
<h3 id="方法一，使用let代替var。"><a href="#方法一，使用let代替var。" class="headerlink" title="方法一，使用let代替var。"></a>方法一，使用<code>let</code>代替<code>var</code>。</h3><p>由于<code>let</code>有块级作用域，所以每次循环都会创建一个新的变量i，而不是像<code>var</code>那样所有的循环都共享一个i。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">100</span>);</span><br></pre></td></tr></table></figure>
<h3 id="方法二：将循环变量i参数化"><a href="#方法二：将循环变量i参数化" class="headerlink" title="方法二：将循环变量i参数化"></a>方法二：将循环变量i参数化</h3><p>说得再通俗一点，将setTimeout的逻辑单独抽离成一个函数<code>print</code>。这样每次循环的时候，都会将当前的i传递给<code>print</code>函数，这样<code>setTimeout</code>的代码加入宏任务队列时会记住当前的i值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="title function_">print</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">print</span>(<span class="params">i</span>) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(i), <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果觉得单独抽离函数不够优雅，可以使用IIFE（立即执行函数表达式）。注意，这里和闭包没有半毛钱关系，IIFE这里只是为了传递参数，也就是上面抽离函数的简化版。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  (<span class="keyword">function</span> (<span class="params">i</span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;)(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">100</span>);</span><br></pre></td></tr></table></figure>

<h3 id="方法三：使用setTimeout的第三个参数"><a href="#方法三：使用setTimeout的第三个参数" class="headerlink" title="方法三：使用setTimeout的第三个参数"></a>方法三：使用<code>setTimeout</code>的第三个参数</h3><p>这个方法可能很多同学都没有见过，其实<code>setTimeout</code>方法是有第三个参数的，这个参数是用来传递给回调函数的参数的。所以我们可以将当前的i值传递给<code>setTimeout</code>的回调函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">(<span class="params">j</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(j), <span class="number">1000</span>, i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">100</span>);</span><br></pre></td></tr></table></figure>
<p>为了做区分，我把回到函数中的<code>i</code>改成了<code>j</code>，这样就不会混淆了。循环变量<code>i</code>通过<code>setTimeout</code>的第三个参数传递给回调函数。</p>
<p>你学会了吗？</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://frontendthink.com/2024/11/16/javascript-interview-questions-01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Philip Zhang">
      <meta itemprop="description" content="青春都一餉，忍把浮名換了代碼輕狂。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Philip">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/11/16/javascript-interview-questions-01/" class="post-title-link" itemprop="url">javascript-interview-questions-01</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-11-16 18:28:11" itemprop="dateCreated datePublished" datetime="2024-11-16T18:28:11+08:00">2024-11-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-07 21:22:54" itemprop="dateModified" datetime="2025-04-07T21:22:54+08:00">2025-04-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/interview/" itemprop="url" rel="index"><span itemprop="name">interview</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>1.8k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>6 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="JS中的箭头函数有哪些特点？"><a href="#JS中的箭头函数有哪些特点？" class="headerlink" title="JS中的箭头函数有哪些特点？"></a>JS中的箭头函数有哪些特点？</h2><table>
<thead>
<tr>
<th>特性</th>
<th>优点</th>
<th>缺点</th>
</tr>
</thead>
<tbody><tr>
<td><strong>语法简洁</strong></td>
<td>箭头函数语法更短、更简洁，适合简单的回调函数或匿名函数。</td>
<td>复杂逻辑中使用隐式返回或多层嵌套时，可能降低代码可读性和可维护性。</td>
</tr>
<tr>
<td><strong>词法作用域绑定 <code>this</code></strong></td>
<td>箭头函数继承定义时的 <code>this</code>，避免了传统函数中 <code>this</code> 动态绑定的问题。</td>
<td>无法动态绑定 <code>this</code>，在需要动态绑定 <code>this</code> 的场景（如对象方法）中不适合使用。</td>
</tr>
<tr>
<td><strong>没有 <code>arguments</code> 对象</strong></td>
<td>避免与普通函数中的 <code>arguments</code> 冲突，可以使用剩余参数（<code>...args</code>）代替。</td>
<td>缺乏 <code>arguments</code> 对象，在需要访问动态参数列表的场景下可能带来不便。</td>
</tr>
<tr>
<td><strong>不能用作构造函数</strong></td>
<td>避免误用为构造函数的风险（箭头函数不能通过 <code>new</code> 调用）。</td>
<td>在需要定义构造函数的场景中无法使用箭头函数。</td>
</tr>
<tr>
<td><strong>隐式返回</strong></td>
<td>单行箭头函数支持隐式返回，无需使用 <code>return</code> 关键字。</td>
<td>隐式返回在复杂逻辑中可能导致代码难以理解。</td>
</tr>
<tr>
<td><strong>调试困难</strong></td>
<td>-</td>
<td>箭头函数的简洁性可能导致代码可读性下降，调试和维护可能会变得困难。</td>
</tr>
<tr>
<td><strong>不能用作生成器函数</strong></td>
<td>-</td>
<td>箭头函数不能用作生成器函数（无法与 <code>function*</code> 结合使用）。</td>
</tr>
<tr>
<td><strong>适用场景</strong></td>
<td>回调函数、不需要动态绑定 <code>this</code> 的场景、简短的函数逻辑。</td>
<td>需要动态绑定 <code>this</code> 的场景、需要访问 <code>arguments</code> 对象的场景、复杂的逻辑、生成器函数场景。</td>
</tr>
</tbody></table>
<h2 id="JS中apply-call-bind的作用和区别是什么？"><a href="#JS中apply-call-bind的作用和区别是什么？" class="headerlink" title="JS中apply, call, bind的作用和区别是什么？"></a>JS中<code>apply</code>, <code>call</code>, <code>bind</code>的作用和区别是什么？</h2><table>
<thead>
<tr>
<th>特性</th>
<th><code>apply</code></th>
<th><code>call</code></th>
<th><code>bind</code></th>
</tr>
</thead>
<tbody><tr>
<td><strong>调用方式</strong></td>
<td>立即调用函数</td>
<td>立即调用函数</td>
<td>返回一个新函数</td>
</tr>
<tr>
<td><strong>参数传递</strong></td>
<td>参数以数组或类数组形式传递</td>
<td>参数逐个传递</td>
<td>参数逐个传递，可预填部分参数</td>
</tr>
<tr>
<td><strong>适用场景</strong></td>
<td>参数数量不确定时（如动态参数）</td>
<td>参数数量固定时</td>
<td>需要延迟调用或复用绑定函数时</td>
</tr>
<tr>
<td><strong>是否修改原函数</strong></td>
<td>否</td>
<td>否</td>
<td>否（返回新函数，不修改原函数）</td>
</tr>
</tbody></table>
<h2 id="JS中map和weakMap的区别是什么？"><a href="#JS中map和weakMap的区别是什么？" class="headerlink" title="JS中map和weakMap的区别是什么？"></a>JS中<code>map</code>和<code>weakMap</code>的区别是什么？</h2><table>
<thead>
<tr>
<th>特性</th>
<th><code>Map</code></th>
<th><code>WeakMap</code></th>
</tr>
</thead>
<tbody><tr>
<td><strong>键的类型</strong></td>
<td>可以是任何类型（包括对象、原始值）</td>
<td>只能是对象或者<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol#shared_symbols_in_the_global_symbol_registry">non-registered symbols</a></td>
</tr>
<tr>
<td><strong>值的类型</strong></td>
<td>可以是任何类型</td>
<td>可以是任何类型</td>
</tr>
<tr>
<td><strong>键的引用方式</strong></td>
<td>强引用</td>
<td>弱引用</td>
</tr>
<tr>
<td><strong>垃圾回收</strong></td>
<td>键对象不会被垃圾回收</td>
<td>如果键对象没有其他引用，则会被回收</td>
</tr>
<tr>
<td><strong>可迭代性</strong></td>
<td>支持（可通过 <code>keys()</code>、<code>values()</code> 等方法遍历）</td>
<td>不支持（无法直接遍历或获取大小）</td>
</tr>
<tr>
<td><strong>获取大小</strong></td>
<td>支持（通过 <code>size</code> 属性）</td>
<td>不支持</td>
</tr>
<tr>
<td><strong>典型应用场景</strong></td>
<td>通用键值对存储</td>
<td>私有数据存储、避免内存泄漏</td>
</tr>
</tbody></table>
<h2 id="简单描述一下JS中的事件循环机制？"><a href="#简单描述一下JS中的事件循环机制？" class="headerlink" title="简单描述一下JS中的事件循环机制？"></a>简单描述一下JS中的事件循环机制？</h2><h2 id="简单描述一下JS中的Promise"><a href="#简单描述一下JS中的Promise" class="headerlink" title="简单描述一下JS中的Promise"></a>简单描述一下JS中的<code>Promise</code></h2><h2 id="以下代码输出什么？"><a href="#以下代码输出什么？" class="headerlink" title="以下代码输出什么？"></a>以下代码输出什么？</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="title function_">map</span>(<span class="built_in">parseInt</span>);</span><br></pre></td></tr></table></figure>
<p>答案：<code>[1, NaN, NaN]</code></p>
<p>解析：先看一下<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map">MDN</a>上关于<code>Array.prototype.map</code>的定义，这里我们没有传递第二个参数，所以使用的是下面第一种调用方式。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">map(callbackFn)</span><br><span class="line">map(callbackFn, thisArg)</span><br></pre></td></tr></table></figure>
<p>而<code>callbackFn</code>接受三个参数</p>
<ul>
<li>element：当前正在处理的元素</li>
<li>index：当前正在处理的元素的索引</li>
<li>array：调用<code>map</code>方法的数组</li>
</ul>
<p>而<code>parseInt</code>函数有如下两种形式，由于map传递过来的参数有三个，所以这里会调用第二种形式。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">parseInt(string)</span><br><span class="line">parseInt(string, radix)</span><br></pre></td></tr></table></figure>
<p>所以上面的代码就变成了如下形式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="title function_">map</span>(<span class="function">(<span class="params">element, index, array</span>) =&gt;</span> <span class="built_in">parseInt</span>(element, index));</span><br></pre></td></tr></table></figure>
<p>展开之后相当于三次<code>parseInt</code>调用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>(<span class="number">1</span>, <span class="number">0</span>); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="number">2</span>, <span class="number">1</span>); <span class="comment">// NaN</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="number">3</span>, <span class="number">2</span>); <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure>
<p>注意：<code>parseInt</code>函数的第二个参数是进制，这个参数有如下限制</p>
<ul>
<li>如果传递的进制不在2-36之间，那么<code>parseInt</code>返回<code>NaN</code>。</li>
<li>如果不传递该参数，或者传递0，那么<code>parseInt</code>会根据第一个参数推断：<ul>
<li>如果第一个参数以<code>0x</code>或者<code>0X</code>开头，那么会被解析为十六进制。</li>
<li>否则会被解析为十进制。</li>
</ul>
</li>
</ul>
<p>所以:  </p>
<ul>
<li><code>parseInt(1, 0);</code> radix为0，根据第一个参数判断，而第一个参数1并非以<code>0x</code>或<code>0X</code>开头，所以会被解析为十进制，返回1。 </li>
<li><code>parseInt(2, 1);</code> radix为1，不在2-36之间，返回<code>NaN</code>。</li>
<li><code>parseInt(3, 2);</code> radix为2，但是3不是二进制数，返回<code>NaN</code>。</li>
</ul>
<p>需要注意的是：<code>parseInt</code>会将第一个参数转换为字符串，然后再解析。所以<code>parseInt(3, 2);</code>等价于<code>parseInt(&#39;3&#39;, 2);</code>。可是二进制数中不可能有3这个数字，所以返回<code>NaN</code>。一个合法的例子是<code>parseInt(&#39;11&#39;, 2);</code>，这个会返回3。</p>
<h2 id="大数相加"><a href="#大数相加" class="headerlink" title="大数相加"></a>大数相加</h2><p>实现一个函数，输入两个字符串，返回它们的和。这两个字符串表示的数字不会以0开头，且不会以空格开头。返回的结果也不会以0开头。<br>这个题考察的点有以下几个</p>
<ol>
<li>字符串如何转换为整数？</li>
<li>进位处理</li>
<li>字符串对齐处理，如何填充前导0？</li>
<li>如何取整。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">bigNumberAdd</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> maxLength = <span class="title class_">Math</span>.<span class="title function_">max</span>(a.<span class="property">length</span>, b.<span class="property">length</span>);</span><br><span class="line">  a = a.<span class="title function_">padStart</span>(maxLength, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">  b = b.<span class="title function_">padStart</span>(maxLength, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> result = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="keyword">let</span> carry = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = maxLength - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">    <span class="keyword">const</span> sum = <span class="title class_">Number</span>(a[i]) + <span class="title class_">Number</span>(b[i]) + carry;</span><br><span class="line">    <span class="comment">// This is string concatenation, not numeric addition.</span></span><br><span class="line">    result = (sum % <span class="number">10</span>) + result; <span class="comment">// if sum &gt; 10, we only need the last digit.</span></span><br><span class="line">    carry = <span class="title class_">Math</span>.<span class="title function_">floor</span>(sum / <span class="number">10</span>); <span class="comment">// the carry is the first digit when sum &gt; 10.</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Don&#x27;t forget the last carry.</span></span><br><span class="line">  <span class="keyword">if</span> (carry &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    result = carry + result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">bigNumberAdd</span>(<span class="string">&#x27;999&#x27;</span>, <span class="string">&#x27;999&#x27;</span>)); <span class="comment">// 1998</span></span><br></pre></td></tr></table></figure>

<h2 id="JS中如何判断Primitive类型？"><a href="#JS中如何判断Primitive类型？" class="headerlink" title="JS中如何判断Primitive类型？"></a>JS中如何判断Primitive类型？</h2><p>可以使用<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/Object"><code>Object()</code></a>函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">isPrimitive</span>(<span class="params">value</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> value !== <span class="title class_">Object</span>(value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isPrimitive</span>(<span class="params">value</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> value === <span class="literal">null</span> || (<span class="keyword">typeof</span> value !== <span class="string">&#x27;object&#x27;</span> &amp;&amp; <span class="keyword">typeof</span> value !== <span class="string">&#x27;function&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="JS中有哪些方法可以判断数组类型？"><a href="#JS中有哪些方法可以判断数组类型？" class="headerlink" title="JS中有哪些方法可以判断数组类型？"></a>JS中有哪些方法可以判断数组类型？</h2><ol>
<li><code>Array.isArray([])</code></li>
<li><code>[] instanceof Array</code></li>
<li><code>Object.prototype.toString.call([]) === &#39;[object Array]&#39;</code></li>
<li><code>Array.prototype.isPrototypeOf([])</code></li>
<li><code>[].__proto__ === Array.prototype</code></li>
<li><code>[].constructor === Array</code></li>
</ol>
<h2 id="深拷贝要注意哪些问题？"><a href="#深拷贝要注意哪些问题？" class="headerlink" title="深拷贝要注意哪些问题？"></a>深拷贝要注意哪些问题？</h2><ol>
<li>循环引用</li>
<li>特殊对象，比如<code>Date</code>, <code>RegExp</code>, <code>Map</code>, <code>Set</code>, <code>Function</code>等。</li>
</ol>
<p>以下是一个简单的实现。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">deepCopy</span>(<span class="params">obj, hash = <span class="keyword">new</span> <span class="built_in">WeakMap</span>()</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> <span class="title class_">RegExp</span>) <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RegExp</span>(obj);</span><br><span class="line">  <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> <span class="title class_">Date</span>) <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Date</span>(obj);</span><br><span class="line">  <span class="keyword">if</span> (obj === <span class="literal">null</span> || <span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span>) <span class="keyword">return</span> obj; <span class="comment">// primitives or function</span></span><br><span class="line">  <span class="keyword">if</span> (hash.<span class="title function_">has</span>(obj)) <span class="keyword">return</span> hash.<span class="title function_">get</span>(obj); <span class="comment">// circular reference</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> newObj = <span class="title class_">Array</span>.<span class="title function_">isArray</span>(obj) ? [] : &#123;&#125;;</span><br><span class="line">  hash.<span class="title function_">set</span>(obj, newObj);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj.<span class="title function_">hasOwnProperty</span>(key)) &#123;</span><br><span class="line">      newObj[key] = <span class="title function_">deepCopy</span>(obj[key], hash);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> newObj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例对象</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">b</span>: [<span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">  <span class="attr">c</span>: &#123; <span class="attr">d</span>: <span class="number">4</span> &#125;,</span><br><span class="line">  <span class="attr">e</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(),</span><br><span class="line">  <span class="attr">f</span>: <span class="regexp">/abc/</span>,</span><br><span class="line">  <span class="title function_">g</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;g&#x27;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 深拷贝</span></span><br><span class="line"><span class="keyword">const</span> copy = <span class="title function_">deepCopy</span>(obj);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(copy);</span><br><span class="line">copy.<span class="title function_">g</span>(); <span class="comment">// g</span></span><br></pre></td></tr></table></figure>

<h2 id="类型转换，以下代码输出什么？"><a href="#类型转换，以下代码输出什么？" class="headerlink" title="类型转换，以下代码输出什么？"></a>类型转换，以下代码输出什么？</h2><p>详情请参考<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Addition"><code>+</code></a>的运算规则：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>([] + []);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>([] + &#123;&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(&#123;&#125; + []);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(&#123;&#125; + &#123;&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="输出结果是什么？"><a href="#输出结果是什么？" class="headerlink" title="输出结果是什么？"></a>输出结果是什么？</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">numbers[<span class="number">4</span>] = <span class="number">4</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(numbers); <span class="comment">// 1, 2, 3, &lt;1 empty item&gt;, 4</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(numbers[<span class="number">3</span>]); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<h2 id="以下代码输出什么？-1"><a href="#以下代码输出什么？-1" class="headerlink" title="以下代码输出什么？"></a>以下代码输出什么？</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = &#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> b = &#123; <span class="attr">key</span>: <span class="string">&#x27;b&#x27;</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> c = &#123; <span class="attr">key</span>: <span class="string">&#x27;c&#x27;</span> &#125;;</span><br><span class="line">a[b] = <span class="number">123</span>;</span><br><span class="line">a[c] = <span class="number">456</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a[b]);</span><br></pre></td></tr></table></figure>
<p>答案：<code>456</code><br>本题考察的点是：<code>对象的键名只能是字符串或者Symbol类型</code>，如果不是，会被转换为字符串。所以<code>a[b]</code>和<code>a[c]</code>都会把键名转换为<code>[object Object]</code>，所以<code>a[b]</code>和<code>a[c]</code>实际上是同一个键，最后赋值会覆盖前面的值。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://frontendthink.com/2024/11/16/http-message/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Philip Zhang">
      <meta itemprop="description" content="青春都一餉，忍把浮名換了代碼輕狂。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Philip">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/11/16/http-message/" class="post-title-link" itemprop="url">http-message</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-11-16 08:18:18" itemprop="dateCreated datePublished" datetime="2024-11-16T08:18:18+08:00">2024-11-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-07 21:19:23" itemprop="dateModified" datetime="2025-04-07T21:19:23+08:00">2025-04-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/http/" itemprop="url" rel="index"><span itemprop="name">http</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>146</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>1 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>HTTP has two types of messages, request message and response message. Both messages consist of a start line, headers, and an optional body.</p>
<p>Note that, HTTP messages, as defined in HTTP&#x2F;1.1 and earlier, are human-readable. In HTTP&#x2F;2, these messages are embedded into a binary structure, a frame, allowing optimizations like compression of headers and multiplexing.</p>
<h1 id="Request-Message"><a href="#Request-Message" class="headerlink" title="Request Message"></a>Request Message</h1><p><img src="/../images/http-request-message.jpg" alt="http-request-message"><br>Http Request message consists of the following elements:</p>
<ol>
<li>An HTTP method.</li>
<li>The path of the resource to fetch.</li>
<li>The version of the HTTP protocol.</li>
<li>Optional headers.</li>
<li>An optional body.</li>
</ol>
<h1 id="Response-Message"><a href="#Response-Message" class="headerlink" title="Response Message"></a>Response Message</h1><p><img src="/../images/http-response-message.jpg" alt="http-response-message"><br>Http Response message consists of the following elements:</p>
<ol>
<li>The version of the HTTP protocol.</li>
<li>A status code indicating the success or failure of the request.</li>
<li>A status message.</li>
<li>Optional headers.</li>
<li>An optional body.</li>
</ol>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ol>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Overview#http_messages">MDN - HTTP Messages</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://frontendthink.com/2024/11/16/http-version-history/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Philip Zhang">
      <meta itemprop="description" content="青春都一餉，忍把浮名換了代碼輕狂。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Philip">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/11/16/http-version-history/" class="post-title-link" itemprop="url">http-version-history</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-11-16 08:14:48" itemprop="dateCreated datePublished" datetime="2024-11-16T08:14:48+08:00">2024-11-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-07 21:19:28" itemprop="dateModified" datetime="2025-04-07T21:19:28+08:00">2025-04-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/http/" itemprop="url" rel="index"><span itemprop="name">http</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>727</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>3 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="The-version-history-of-HTTP"><a href="#The-version-history-of-HTTP" class="headerlink" title="The version history of HTTP"></a>The version history of HTTP</h1><table>
<thead>
<tr>
<th>Version</th>
<th>Year introduced</th>
<th>Current status</th>
<th>Usage in August 2024</th>
<th>Support in August 2024</th>
</tr>
</thead>
<tbody><tr>
<td>HTTP&#x2F;0.9</td>
<td>1991</td>
<td><span style="background-color:rgb(164, 12, 12);">Obsolete</span></td>
<td>0</td>
<td>100%</td>
</tr>
<tr>
<td>HTTP&#x2F;1.0</td>
<td>1996</td>
<td><span style="background-color:rgb(164, 12, 12);">Obsolete</span></td>
<td>0</td>
<td>100%</td>
</tr>
<tr>
<td>HTTP&#x2F;1.1</td>
<td>1997</td>
<td>Standard</td>
<td>33.8%</td>
<td>100%</td>
</tr>
<tr>
<td>HTTP&#x2F;2</td>
<td>2015</td>
<td>Standard</td>
<td>35.3%</td>
<td>66.2%</td>
</tr>
<tr>
<td>HTTP&#x2F;3</td>
<td>2022</td>
<td>Standard</td>
<td>30.9%</td>
<td>30.9%</td>
</tr>
</tbody></table>
<h2 id="HTTP-0-9"><a href="#HTTP-0-9" class="headerlink" title="HTTP&#x2F;0.9"></a>HTTP&#x2F;0.9</h2><p>HTTP&#x2F;0.9 is the first version of the HTTP protocol. It was a simple protocol that allowed clients to request a file from a server. The server would then send the file back to the client. The protocol did not support headers or status codes, and the client and server communicated using plain text.</p>
<h2 id="HTTP-1-0"><a href="#HTTP-1-0" class="headerlink" title="HTTP&#x2F;1.0"></a>HTTP&#x2F;1.0</h2><p>HTTP&#x2F;1.0 was released in 1996 and introduced several new features to the protocol. These features included support for headers, status codes, and the ability to send multiple files in a single request. HTTP&#x2F;1.0 also introduced the concept of persistent connections, which allowed clients to reuse a single connection to send multiple requests.</p>
<h2 id="HTTP-1-1"><a href="#HTTP-1-1" class="headerlink" title="HTTP&#x2F;1.1"></a>HTTP&#x2F;1.1</h2><p>HTTP&#x2F;1.1 was released in 1999 and is the most widely used version of the HTTP protocol today. It introduced several new features, including support for chunked transfer encoding, which allows servers to send data in chunks, and the ability to reuse connections for multiple requests. HTTP&#x2F;1.1 also introduced several new status codes, such as 100 Continue and 206 Partial Content.</p>
<p>Details about HTTP&#x2F;1.1:</p>
<ol>
<li>HTTP&#x2F;1.1 is a text-based protocol.</li>
</ol>
<h2 id="HTTP-2"><a href="#HTTP-2" class="headerlink" title="HTTP&#x2F;2"></a>HTTP&#x2F;2</h2><p>HTTP&#x2F;2 was released in 2015 and introduced several new features to the protocol. These features included support for multiplexing, which allows clients to send multiple requests over a single connection, and server push, which allows servers to send resources to clients before they are requested. HTTP&#x2F;2 also introduced several new status codes, such as 103 Early Hints and 421 Misdirected Request.</p>
<p>Details about HTTP&#x2F;2:</p>
<ol>
<li>HTTP&#x2F;2 Message is binary, instead of textual.</li>
</ol>
<h2 id="HTTP-3"><a href="#HTTP-3" class="headerlink" title="HTTP&#x2F;3"></a>HTTP&#x2F;3</h2><p>HTTP&#x2F;3 is the latest version of the HTTP protocol and is currently in development. It is based on the QUIC protocol, which is a new transport protocol that is designed to improve the performance of web applications. HTTP&#x2F;3 introduces several new features, including support for multiplexing, which allows clients to send multiple requests over a single connection, and server push, which allows servers to send resources to clients before they are requested. HTTP&#x2F;3 also introduces several new status codes, such as 103 Early Hints and 421 Misdirected Request.</p>
<table>
<thead>
<tr>
<th>Version</th>
<th>Release Date</th>
<th>Feature</th>
<th>Comments</th>
</tr>
</thead>
<tbody><tr>
<td>Http 0.9</td>
<td>1991</td>
<td>只支持Get请求，没有Head，没有Status Code</td>
<td>只支持Plain Text，不支持图片，视频，语音等</td>
</tr>
<tr>
<td>Http 1.0</td>
<td>1996</td>
<td>无状态、短连接，队头阻塞</td>
<td>每个请求都要建立一个TCP连接，请求处理完TCP就关闭。下一个请求必须在前一个请求完成时才能开始，可能导致队头阻塞问题</td>
</tr>
<tr>
<td>Http 1.1</td>
<td>1999</td>
<td><ul><li>持久连接(keep alive)</li><li>请求管道化（pipeling）</li><li>增加缓存处理（新增Cache-Control字段）</li><li>增加Host字段、支持断点续传</li></ul></td>
<td>TCP连接可以复用。客户端可同时发送多个请求，但是服务端仍是一个一个处理，仍然存在队头阻塞问题。</td>
</tr>
<tr>
<td>Http 2.0</td>
<td>2015</td>
<td><ul><li>二进制分帧</li><li>多路复用（或连接共享）</li><li>头部压缩</li><li>服务器推送</li></ul></td>
<td>仍然基于TCP，虽然没有Http队头阻塞，但是有TCP队头阻塞</td>
</tr>
<tr>
<td>Http 3.0</td>
<td>2020</td>
<td>不再基于TCP，而是基于UDP，采用由Google在UDP协议上进行封装而形成的QUIC协议，保证传输的可靠性，并且一路传输失败不影响其他路。</td>
<td></td>
</tr>
</tbody></table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://frontendthink.com/2024/11/16/software-architecture-design-principle/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Philip Zhang">
      <meta itemprop="description" content="青春都一餉，忍把浮名換了代碼輕狂。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Philip">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/11/16/software-architecture-design-principle/" class="post-title-link" itemprop="url">software-architecture-design-principle</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-11-16 08:00:14" itemprop="dateCreated datePublished" datetime="2024-11-16T08:00:14+08:00">2024-11-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-07 21:32:30" itemprop="dateModified" datetime="2025-04-07T21:32:30+08:00">2025-04-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/architecture/" itemprop="url" rel="index"><span itemprop="name">architecture</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>504</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>2 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p><code>SOLID</code>是五个面向对象设计原则的首字母缩写，分别是：</p>
<ul>
<li>Single Responsibility Principle (SRP) - 单一职责原则</li>
<li>Open&#x2F;Closed Principle (OCP) - 开闭原则</li>
<li>Liskov Substitution Principle (LSP) - 里氏替换原则</li>
<li>Interface Segregation Principle (ISP) - 接口隔离原则</li>
<li>Dependency Inversion Principle (DIP) - 依赖倒置原则</li>
</ul>
<h2 id="Single-Responsibility-Principle-SRP"><a href="#Single-Responsibility-Principle-SRP" class="headerlink" title="Single Responsibility Principle (SRP)"></a>Single Responsibility Principle (SRP)</h2><p>单一职责原则是指一个类应该只有一个引起它变化的原因。换句话说，一个类应该只有一个职责。这不意味着一个类只能有一个功能 - 这是不准确的说法。确切的说，一个类或者模块应该对且仅对一类行为主体负责！</p>
<h2 id="Open-Closed-Principle-OCP"><a href="#Open-Closed-Principle-OCP" class="headerlink" title="Open&#x2F;Closed Principle (OCP)"></a>Open&#x2F;Closed Principle (OCP)</h2><p>开闭原则是指一个软件实体（类、模块、函数等）应该对扩展开放，对修改关闭。这意味着一个实体应该通过扩展来实现新的功能，而不是通过修改已有的代码来实现。</p>
<p>这通常通过使用抽象类和接口来实现。抽象类和接口定义了一组规范，具体的实现类来实现这些规范。如果将来要添加新的功能，只需要添加新的实现类，而不需要修改已有的代码。</p>
<h2 id="Liskov-Substitution-Principle-LSP"><a href="#Liskov-Substitution-Principle-LSP" class="headerlink" title="Liskov Substitution Principle (LSP)"></a>Liskov Substitution Principle (LSP)</h2><p>里氏替换原则是指一个软件实体（类、模块、函数等）应该可以被它的子类替换，而不影响程序的正确性。这意味着一个子类应该可以替换它的父类，而不需要修改父类的代码。</p>
<h2 id="Interface-Segregation-Principle-ISP"><a href="#Interface-Segregation-Principle-ISP" class="headerlink" title="Interface Segregation Principle (ISP)"></a>Interface Segregation Principle (ISP)</h2><p>接口隔离原则是指一个类对另一个类的依赖应该建立在最小的接口上。换句话说，一个类不应该依赖它不需要的接口。</p>
<h2 id="Dependency-Inversion-Principle-DIP"><a href="#Dependency-Inversion-Principle-DIP" class="headerlink" title="Dependency Inversion Principle (DIP)"></a>Dependency Inversion Principle (DIP)</h2><p>依赖倒置原则是指高层模块不应该依赖于低层模块，两者都应该依赖于抽象。换句话说，模块之间的依赖关系应该是通过抽象发生的，而不是通过具体实现发生的。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://frontendthink.com/2024/11/14/http-browser-cache/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Philip Zhang">
      <meta itemprop="description" content="青春都一餉，忍把浮名換了代碼輕狂。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Philip">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/11/14/http-browser-cache/" class="post-title-link" itemprop="url">http-browser-cache</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-11-14 17:53:06" itemprop="dateCreated datePublished" datetime="2024-11-14T17:53:06+08:00">2024-11-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-07 21:19:12" itemprop="dateModified" datetime="2025-04-07T21:19:12+08:00">2025-04-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/http/" itemprop="url" rel="index"><span itemprop="name">http</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>1.6k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>6 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>缓存是前端开发中非常重要的概念，它可以提高网站的性能，减少服务器的负担。本文主要介绍Http和浏览器缓存的相关知识。</p>
<p>不知道各位读者是否有这样的体验：</p>
<ol>
<li>某个网站第一次打开的时候特别慢，再次打开的时候就快很多。</li>
<li>登录某个网站后，下次再访问的时候自动就是登录状态了。</li>
</ol>
<p>其实以上现象都是缓存的功劳。</p>
<h1 id="Http-Cache"><a href="#Http-Cache" class="headerlink" title="Http Cache"></a>Http Cache</h1><h1 id="缓存相关的头部字段"><a href="#缓存相关的头部字段" class="headerlink" title="缓存相关的头部字段"></a>缓存相关的头部字段</h1><h2 id="Expires"><a href="#Expires" class="headerlink" title="Expires"></a>Expires</h2><p><code>Expires</code>是一个HTTP响应头部字段，用于指定资源的过期时间。它的值是一个GMT格式的时间字符串。以下代码表示资源的过期时间是2024年11月16日14点10分23秒。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expires:Sat, 16 Nov 2024 14:10:23 GMT</span><br></pre></td></tr></table></figure>
<p><code>Expires</code>是HTTP&#x2F;1.0的标准，它有一个问题，就是我们判断缓存过期时，浏览器会使用当前系统时间与<code>Expires</code>字段的时间进行比较。如果系统时间大于<code>Expires</code>字段的时间，那么缓存就会被认为过期了。但是当前系统时间是可以人为修改的，这就会导致缓存过期时间不准确。</p>
<h2 id="Cache-Control"><a href="#Cache-Control" class="headerlink" title="Cache-Control"></a>Cache-Control</h2><p><code>Cache-Control</code>字段的取值有如下几种：</p>
<h3 id="max-age"><a href="#max-age" class="headerlink" title="max-age"></a>max-age</h3><p><code>max-age</code>的值是一个整数，单位是秒，表示缓存会在xxx秒后过期。以下代码表示资源会在3600秒后过期。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cache-control:max-age=3600</span><br></pre></td></tr></table></figure>
<p>那么<code>max-age</code>中指定的3600秒参照的是什么时间呢？它参照的是服务器生成Response的时间，而不是浏览器收到Response的时间。那么服务器生成Response的时间在响应头中有吗？有的，就是<code>Date</code>字段。<code>Date</code>字段表示服务器生成Response的时间。所以缓存的的过期时间是<code>Date</code>字段的时间加上<code>max-age</code>的值。</p>
<p><strong>ExpireTime &#x3D; Date + max-age</strong></p>
<p>注意：如果<code>max-age</code>和<code>Expires</code>同时存在，那么<code>max-age</code>的优先级更高，<code>Expires</code>会被忽略。</p>
<h3 id="no-cache"><a href="#no-cache" class="headerlink" title="no-cache"></a>no-cache</h3><p>注意：这个字段的意思不是不使用缓存！<br>这个字段的意思是可以使用缓存，但是使用前需要向服务器验证缓存是否过期。也就是协商缓存。</p>
<h3 id="no-store"><a href="#no-store" class="headerlink" title="no-store"></a>no-store</h3><p>不使用缓存，每次都需要向服务器请求资源。</p>
<h3 id="must-revalidate"><a href="#must-revalidate" class="headerlink" title="must-revalidate"></a>must-revalidate</h3><p>在缓存过期前，直接使用缓存，但是过期后需要向服务器验证缓存是否过期。</p>
<h2 id="Last-Modified"><a href="#Last-Modified" class="headerlink" title="Last-Modified"></a>Last-Modified</h2><p><code>Last-Modified</code>是一个HTTP响应头部字段，用于指定资源的最后修改时间。它的值是一个GMT格式的时间字符串。以下代码表示资源的最后修改时间是2024年11月16日14点10分23秒。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">last-modified:Sat, 16 Nov 2024 14:10:23 GMT</span><br></pre></td></tr></table></figure>
<p>当客户端再次请求资源时，会将上次请求时服务器返回的<code>Last-Modified</code>值放在请求头中的<code>If-Modified-Since</code>字段中，服务器会根据这个值判断资源是否发生了变化。如果资源没有发生变化，服务器会返回<code>304 Not Modified</code>状态码，表示资源没有发生变化，客户端可以使用缓存。</p>
<h2 id="ETag"><a href="#ETag" class="headerlink" title="ETag"></a>ETag</h2><p><code>ETag</code>是一个HTTP响应头部字段，用于指定资源的唯一标识。它的值是一个字符串。服务器会根据资源的内容生成一个唯一的字符串（注意，生成算法因服务器而异），然后将这个字符串作为<code>ETag</code>的值。当客户端再次请求资源时，会将上次请求时服务器返回的<code>ETag</code>值放在请求头中的<code>If-None-Match</code>字段中，服务器会根据这个值判断资源是否发生了变化。如果资源没有发生变化，服务器会返回<code>304 Not Modified</code>状态码，表示资源没有发生变化，客户端可以使用缓存。</p>
<h3 id="ETag相比Last-Modified的优点"><a href="#ETag相比Last-Modified的优点" class="headerlink" title="ETag相比Last-Modified的优点"></a>ETag相比Last-Modified的优点</h3><h4 id="精确性："><a href="#精确性：" class="headerlink" title="精确性："></a>精确性：</h4><ul>
<li>ETag 可以提供比 Last-Modified 更精确的资源版本标识。Last-Modified 是基于时间戳的，而时间戳的精度通常是秒级，这意味着如果一个资源在一秒内发生变化多次，Last-Modified 就无法区分这些变化。</li>
<li>ETag 是一个可以由服务器自由定义的字符串，它可以唯一标识一个资源的特定版本，甚至可以包括内容的哈希值，从而确保即使是微小的变化也能被准确识别。</li>
</ul>
<h4 id="灵活性："><a href="#灵活性：" class="headerlink" title="灵活性："></a>灵活性：</h4><ul>
<li>ETag 允许更灵活的缓存控制策略。它可以是强验证器（保证内容完全一致）或弱验证器（允许一定程度上的差异，如压缩、格式转换等），这取决于服务器如何生成 ETag。</li>
<li>例如，当资源的内容没有变化，但是某些元数据发生了变化（比如编码方式），服务器可以选择更新 ETag 或者不更新，这取决于是否希望客户端重新获取资源。</li>
</ul>
<h4 id="避免时间戳问题："><a href="#避免时间戳问题：" class="headerlink" title="避免时间戳问题："></a>避免时间戳问题：</h4><ul>
<li>由于 Last-Modified 基于时间，它可能会遇到时钟不同步的问题。如果客户端和服务器之间的系统时钟存在较大偏差，那么基于 Last-Modified 的缓存验证可能会出错。</li>
<li>ETag 不依赖于时间戳，因此不受时钟同步问题的影响。</li>
</ul>
<h4 id="支持非文件资源："><a href="#支持非文件资源：" class="headerlink" title="支持非文件资源："></a>支持非文件资源：</h4><ul>
<li>对于动态生成的内容（例如数据库查询结果），可能没有明确的最后修改时间，此时使用 ETag 更为合适。服务器可以根据内容的状态生成一个唯一的 ETag。</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol>
<li><code>expires</code>和<code>max-age</code>控制的是强缓存。</li>
<li><code>Last-Modified</code>和<code>ETag</code>控制的是协商缓存。</li>
<li>浏览器请求时会先检查强缓存，然后再检查协商缓存。</li>
</ol>
<h2 id="一道面试题"><a href="#一道面试题" class="headerlink" title="一道面试题"></a>一道面试题</h2><p>如果一次Http请求返回的状态码是200，那么这个请求走缓存了吗？<br>答案：可能走，也可能没走。<br>解析：我们大多数人都知道状态码304表示资源没有改变，那么就使用本地缓存，这个属于协商缓存。还有一种是强缓存，就是直接使用本地缓存，不需要向服务器验证。这种情况下，状态码是200。</p>
<h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><ol>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching">https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.cn/book/6994678547826606095/section/6997029635766616077?scrollMenuIndex=1">https://juejin.cn/book/6994678547826606095/section/6997029635766616077?scrollMenuIndex=1</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://frontendthink.com/2024/11/14/javascript-var-let-const/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Philip Zhang">
      <meta itemprop="description" content="青春都一餉，忍把浮名換了代碼輕狂。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Philip">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/11/14/javascript-var-let-const/" class="post-title-link" itemprop="url">javascript-var-let-const</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-11-14 11:15:06" itemprop="dateCreated datePublished" datetime="2024-11-14T11:15:06+08:00">2024-11-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-06-11 21:54:54" itemprop="dateModified" datetime="2025-06-11T21:54:54+08:00">2025-06-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>2.6k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>9 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p><code>var</code>, <code>let</code> and <code>const</code>是JavaScript中三种定义变量的方式，它们之间有什么区别呢？这是前端面试中常见的一道题，今天我们来一文说透它。<br><code>let</code>和<code>const</code>区别不大，主要是<code>const</code>声明的变量是常量，不可修改，而<code>let</code>声明的变量是可修改的。所以我们重点放在<code>var</code>和<code>let</code>上。</p>
<h1 id="变量初始化"><a href="#变量初始化" class="headerlink" title="变量初始化"></a>变量初始化</h1><p>声明变量的同时为其赋值叫做初始化。</p>
<ul>
<li><code>var</code>和<code>let</code>声明的变量都可以不赋值，此时变量的值为<code>undefined</code>。</li>
<li><code>const</code>声明的变量必须赋值，否则会报错。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// `var`和`let`声明的变量可以不赋值，此时变量的值为`undefined`。</span></span><br><span class="line"><span class="keyword">var</span> num; <span class="comment">// num的值是undefined</span></span><br><span class="line">num = <span class="number">1</span>; <span class="comment">// num的值是1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str; <span class="comment">// str的值是undefined</span></span><br><span class="line">str = <span class="string">&#x27;hello&#x27;</span>; <span class="comment">// str的值是&#x27;hello&#x27; </span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// `const`声明的变量必须赋值，否则会报错。</span></span><br><span class="line"><span class="keyword">const</span> a; <span class="comment">// SyntaxError: Missing initializer in const declaration</span></span><br></pre></td></tr></table></figure>

<h1 id="变量提升-Hoisting"><a href="#变量提升-Hoisting" class="headerlink" title="变量提升 - Hoisting"></a>变量提升 - Hoisting</h1><p><code>Hoisting</code>这个词中文译为提升，就是将变量的声明提升到其作用域的顶部，注意提升的是声明，而不是赋值。</p>
<ul>
<li><code>var</code>声明的变量会被提升至其作用域顶部。</li>
<li><code>let</code>和<code>const</code>声明的变量不会被提升。（注意这个说法有争议，详见<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Glossary/Hoisting">MDN</a>）</li>
<li>提升只针对变量声明，不包括赋值。</li>
</ul>
<h2 id="如果var是在全局作用域声明的，那么它会被提升到全局作用域的顶部。"><a href="#如果var是在全局作用域声明的，那么它会被提升到全局作用域的顶部。" class="headerlink" title="如果var是在全局作用域声明的，那么它会被提升到全局作用域的顶部。"></a>如果var是在全局作用域声明的，那么它会被提升到全局作用域的顶部。</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name); <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&#x27;Philip&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>以上代码等价于：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name; <span class="comment">// `var`声明的变量会被提升到其作用域顶部。</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name); <span class="comment">// undefined</span></span><br><span class="line">name = <span class="string">&#x27;Philip&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="如果var是在函数作用域声明的，那么它会被提升到函数作用域的顶部。"><a href="#如果var是在函数作用域声明的，那么它会被提升到函数作用域的顶部。" class="headerlink" title="如果var是在函数作用域声明的，那么它会被提升到函数作用域的顶部。"></a>如果var是在函数作用域声明的，那么它会被提升到函数作用域的顶部。</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">printName</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(name); <span class="comment">// undefined</span></span><br><span class="line">  <span class="keyword">var</span> name = <span class="string">&#x27;Philip&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">printName</span>();</span><br></pre></td></tr></table></figure>
<p>以上代码等价于：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">printName</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> name; <span class="comment">// `var`声明的变量会被提升到其作用域顶部。</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(name); <span class="comment">// undefined</span></span><br><span class="line">  name = <span class="string">&#x27;Philip&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">printName</span>();</span><br></pre></td></tr></table></figure>
<h2 id="let和const声明的变量不会被提升。"><a href="#let和const声明的变量不会被提升。" class="headerlink" title="let和const声明的变量不会被提升。"></a><code>let</code>和<code>const</code>声明的变量不会被提升。</h2><p>对于<code>let</code>和<code>const</code>，它们不会被提升，所以下面代码会报错。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num); <span class="comment">// ReferenceError: Cannot access &#x27;num&#x27; before initialization</span></span><br><span class="line"><span class="keyword">const</span> num = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p>前面说过，关于<code>let</code>和<code>const</code>是否被提升有争议。</p>
<ul>
<li>一种说法是<code>let</code>和<code>const</code>不会被提升，所以在声明之前访问会报错。</li>
<li>另一种说法是<code>let</code>和<code>const</code>会被提升，但是在声明之前访问会抛出<code>Temporal Dead Zone</code>错误。</li>
</ul>
<p>比如下面的代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> x = <span class="number">1</span>;</span><br><span class="line">&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// ReferenceError: Cannot access &#x27;x&#x27; before initialization</span></span><br><span class="line">  <span class="keyword">const</span> x = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这段代码会报错，但是如果我们把<code>&#123;&#125;</code>内的<code>const x = 2;</code>注释掉，那么代码就不会报错。如果<code>const x = 2</code>没有被提升的话，那么<code>console.log(x)</code>应该可以访问到全局的<code>const x = 1</code>，而不会报错。换句话说：因为<code>const x = 2</code>被提升了，所以<code>console.log(x)</code>访问的是提升后的<code>x</code>，而此时<code>x</code>还没有被初始化，所以报错。</p>
<h2 id="提升只针对变量声明，不包括赋值。"><a href="#提升只针对变量声明，不包括赋值。" class="headerlink" title="提升只针对变量声明，不包括赋值。"></a>提升只针对变量声明，不包括赋值。</h2><p>下面的代码会报错，因为x &#x3D; 1是赋值，并不是声明，所以不会提升。(注意：如果变量声明前没有加<code>var</code>, <code>let</code>或<code>const</code>，那么其实产生的是一个意外的全局变量。)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// ReferenceError: x is not defined</span></span><br><span class="line">x = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<h2 id="如果有同名函数和变量，那么提升后，变量位于函数之前（或者说函数会覆盖变量）。"><a href="#如果有同名函数和变量，那么提升后，变量位于函数之前（或者说函数会覆盖变量）。" class="headerlink" title="如果有同名函数和变量，那么提升后，变量位于函数之前（或者说函数会覆盖变量）。"></a>如果有同名函数和变量，那么提升后，变量位于函数之前（或者说函数会覆盖变量）。</h2><p>以下代码中有一个同名的函数和变量。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(foo); <span class="comment">// [Function: foo], not undefined.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;function foo&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> foo = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p>提升后代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;function foo&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(foo);</span><br><span class="line">foo = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<h2 id="面试题"><a href="#面试题" class="headerlink" title="面试题"></a>面试题</h2><p>看几道面试题，以下几段代码输出什么？</p>
<ol>
<li>第一题</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<p>解决var提升的问题很简单，就是按照提升规则将代码重写一下，上面的代码等价于如下代码，结果一目了然。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line">a = <span class="number">2</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>第二题</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="literal">true</span>;</span><br><span class="line"><span class="title function_">foo</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (a) &#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>只要函数内部有<code>var</code>声明的变量，那么所有全局声明的<code>var</code>变量都会被忽略，以上代码提升后等价于如下代码（注意<code>function</code>也有提升），函数内部的var永远会覆盖全局的<code>var</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> a; <span class="comment">// value of a is `undefined`</span></span><br><span class="line">  <span class="keyword">if</span> (a) &#123;</span><br><span class="line">    a = <span class="number">10</span>; <span class="comment">// never executed.</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">foo</span>();</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>第三题</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> foo);</span><br><span class="line">  <span class="keyword">var</span> foo = <span class="string">&#x27;variable&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;function&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> foo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">fn</span>();</span><br></pre></td></tr></table></figure>
<p>还是那句话，此类题目的解法就是按照提升规则把代码重新写一遍，以上代码提升后等价于如下代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> foo;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;function&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> foo);</span><br><span class="line">  </span><br><span class="line">  foo = <span class="string">&#x27;variable&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> foo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">fn</span>();</span><br></pre></td></tr></table></figure>
<p>所以输出结果是<code>function</code>和<code>string</code>。</p>
<h1 id="变量的作用域"><a href="#变量的作用域" class="headerlink" title="变量的作用域"></a>变量的作用域</h1><ul>
<li><code>var</code>声明的变量有只两种作用域：全局作用域和函数作用域。（没有块级作用域）</li>
<li><code>let</code>和<code>const</code>声明的变量有三种作用域：全局作用域，函数作用域和块级作用域。</li>
<li><code>var</code>声明的全局变量会挂载到<code>window</code>对象上，而<code>let</code>和<code>const</code>不会。</li>
<li><code>let</code>和<code>const</code>有临时性死区，而<code>var</code>没有。</li>
</ul>
<h2 id="面试题-1"><a href="#面试题-1" class="headerlink" title="面试题"></a>面试题</h2><h3 id="第一题"><a href="#第一题" class="headerlink" title="第一题"></a>第一题</h3><p>以下代码输出什么？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">1</span>;</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> x = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x);</span><br></pre></td></tr></table></figure>
<p>答案：1，因为<code>let</code>有块级作用域，所以<code>let x = 2</code>只在<code>&#123;&#125;</code>内有效。</p>
<h3 id="第二题"><a href="#第二题" class="headerlink" title="第二题"></a>第二题</h3><p>以下代码输出什么？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">1</span>;</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">var</span> x = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x);</span><br></pre></td></tr></table></figure>
<p>答案：2，因为<code>var</code>没有块级作用域，所以<code>var x = 2</code>会覆盖外部的<code>var x = 1</code>。</p>
<h3 id="第三题"><a href="#第三题" class="headerlink" title="第三题"></a>第三题</h3><p>以下代码输出什么？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;zdd&#x27;</span>;</span><br><span class="line">&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(name); </span><br><span class="line">  <span class="keyword">let</span> name = <span class="string">&#x27;Philip&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>答案：ReferenceError: Cannot access ‘name’ before initialization。因为<code>let</code>有块级作用域，所以<code>console.log(name);</code>访问的是<code>let name = &#39;Philip&#39;;</code>之前的<code>name</code>，而此时<code>name</code>还没有被初始化，处于暂时性死区中，所以报错。</p>
<h3 id="第四题"><a href="#第四题" class="headerlink" title="第四题"></a>第四题</h3><p>以下代码输出什么？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;foo&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">foo</span>();</span><br></pre></td></tr></table></figure>
<p>答案：ReferenceError: foo is not defined。因为<code>foo</code>是在块级作用域内声明的，所以在外部无法访问。但是如果我们把<code>&#39;use strict&#39;;</code>去掉，那么代码就可以正常运行。因为在非严格模式下，函数声明会被提升到全局作用域。</p>
<h3 id="第五题"><a href="#第五题" class="headerlink" title="第五题"></a>第五题</h3><p>以下代码输出什么？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> x;</span><br><span class="line">  <span class="keyword">let</span> y;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (x) &#123;</span><br><span class="line">    x = <span class="number">1</span>;</span><br><span class="line">    y = <span class="number">2</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(x);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(y);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>答案：1 <code>undefined</code> 2。因为<code>catch</code>中的<code>x</code>是一个新的变量，不是外部的<code>x</code>，所以<code>x = 1</code>只会改变<code>catch</code>中的<code>x</code>，而不会改变外部的<code>x</code>。而<code>y = 2</code>不是<code>catch</code>的参数，只是在<code>catch</code>中赋值的，所以会改变外部的<code>y</code>。</p>
<h1 id="暂时性死区-Temporal-Dead-Zone"><a href="#暂时性死区-Temporal-Dead-Zone" class="headerlink" title="暂时性死区 - Temporal Dead Zone"></a>暂时性死区 - Temporal Dead Zone</h1><p>TDZ即<code>Temporal Dead Zone</code> - 中文名暂时性死区，是指<code>let</code>和<code>const</code>声明的变量在其作用域开始到变量声明之间的这段区域。在暂时性死区内无法访问变量，访问会报错。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// ReferenceError: Cannot access &#x27;b&#x27; before initialization</span></span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">const</span> b = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">foo</span>();</span><br></pre></td></tr></table></figure>
<p>对于以上代码，常量<code>b</code>的暂时性死区开始于函数的第一行，终止于<code>b</code>的声明，而<code>console.log(b);</code>这句恰恰在暂时性死区内访问了<code>b</code>，所以会报错。</p>
<h2 id="面试题-2"><a href="#面试题-2" class="headerlink" title="面试题"></a>面试题</h2><p>以下代码输出什么？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> bar);</span><br><span class="line">  <span class="keyword">const</span> bar = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">foo</span>();</span><br></pre></td></tr></table></figure>
<p>答案：<br><code>ReferenceError: Cannot access &#39;bar&#39; before initialization</code><br>因为<code>console.log(typeof bar);</code>这句在<code>bar</code>的暂时性死区内访问了<code>bar</code>，所以会报错。可以看到，即使强如<code>typeof</code>这种几乎不会报错的操作符也无法规避暂时性死区。</p>
<p>如果我们把<code>const bar = 1;</code>去掉，那么代码就不会报错。<code>typeof</code>操作符对于没有声明的变量不会报错，而是返回<code>undefined</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> bar); <span class="comment">// 输出undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="重新声明-Redeclaration"><a href="#重新声明-Redeclaration" class="headerlink" title="重新声明- Redeclaration"></a>重新声明- Redeclaration</h1><ul>
<li><code>var</code>声明的变量可以被重复声明，后声明的覆盖先声明的。</li>
<li><code>let</code>和<code>const</code>声明的变量不可以被重复声明。</li>
</ul>
<h2 id="面试题-3"><a href="#面试题-3" class="headerlink" title="面试题"></a>面试题</h2><p>看几道面试题，以下几段代码输出什么？</p>
<ol>
<li>第一题</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">3</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">foo</span>();</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br></pre></td></tr></table></figure>
<p>答案：3 3 1, 这个题主要考察两个知识点：</p>
<ol>
<li><code>var</code>声明的变量没有块级作用域。</li>
<li><code>var</code>声明的变量可以被重复声明，后声明的会覆盖先声明的。<br>所以<code>var a = 3</code>会覆盖外部的<code>var a = 2</code>，但是<code>var a = 2</code>不会覆盖最外面的<code>var a = 1</code>。因为<code>var</code>有函数作用域。</li>
</ol>
<p>以上代码提升后等价于如下代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line">a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> a;</span><br><span class="line">  <span class="keyword">var</span> a; <span class="comment">// redeclaration</span></span><br><span class="line">  a = <span class="number">2</span>;</span><br><span class="line">  &#123;</span><br><span class="line">    a = <span class="number">3</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">foo</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br></pre></td></tr></table></figure>
<p>注意：面试题中凡事用<code>&#123;&#125;</code>包裹<code>var</code>的都是障眼法，<code>var</code>没有块级作用域。</p>
<h3 id="第二题-1"><a href="#第二题-1" class="headerlink" title="第二题"></a>第二题</h3><p>这道题比较简单，考察的是<code>let</code>的块级作用域，代码输出2, 1。因为<code>let</code>有块级作用域。<code>let a = 2</code>只在<code>&#123;&#125;</code>内有效。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="number">2</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">foo</span>();</span><br></pre></td></tr></table></figure>

<h1 id="意外的全局变量"><a href="#意外的全局变量" class="headerlink" title="意外的全局变量"></a>意外的全局变量</h1><p>如果我们声明变量的时候忘记了写<code>var</code>, <code>let</code>或者<code>const</code>，那么这个变量就是所谓的<code>Accidental Global Variables</code>，意思是<code>意外的全局变量</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  b = <span class="number">2</span>; <span class="comment">// accident global variable</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">f1</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<h1 id="面试题-4"><a href="#面试题-4" class="headerlink" title="面试题"></a>面试题</h1><p>以下代码输出什么？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>答案：3 3 3<br>因为<code>var</code>没有块级作用域，所以<code>setTimeout</code>内的<code>i</code>都是指向同一个<code>i</code>，而<code>setTimeout</code>是异步的，其回调函数代码需要先进入宏任务队列，待<code>for</code>循环结束后才能执行，此时<code>i</code>已经是3了。关于这道题的详细解释，请看<a target="_blank" rel="noopener" href="https://zdd.github.io/2024/11/16/javascript-interview-questions-02/">这篇</a>。</p>
<h1 id="最佳实践"><a href="#最佳实践" class="headerlink" title="最佳实践"></a>最佳实践</h1><ol>
<li><p>如今ES6已经普及，对于业务代码来说，基本不需要使用<code>var</code>了，<code>var</code>目前只有JS框架或者底层工具库才会使用。</p>
</li>
<li><p>对于<code>let</code>和<code>const</code>，优先使用<code>const</code>，只有在需要修改变量的情况下才使用<code>let</code>。</p>
</li>
<li><p>经典for循环使用<code>let</code>，因为循环变量会被修改。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><code>for...in</code>和<code>for...of</code>使用<code>const</code>，因为循环变量不会被修改。  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> arr) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(item);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;<span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(key);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>祝大家编程愉快，如果觉得有用就点个关注，每篇文章都是纯古法手打，在AI大行其道的当下，认认真真写文章的人不多了，您的点赞转发评论就是对我最大的支持！</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://frontendthink.com/2024/11/14/browser-what-happened-when-you-input-url-and-press-enter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Philip Zhang">
      <meta itemprop="description" content="青春都一餉，忍把浮名換了代碼輕狂。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Philip">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/11/14/browser-what-happened-when-you-input-url-and-press-enter/" class="post-title-link" itemprop="url">browser-what-happened-when-you-input-url-and-press-enter</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-11-14 10:49:09" itemprop="dateCreated datePublished" datetime="2024-11-14T10:49:09+08:00">2024-11-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-07 16:43:44" itemprop="dateModified" datetime="2025-04-07T16:43:44+08:00">2025-04-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/interview/" itemprop="url" rel="index"><span itemprop="name">interview</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>596</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>2 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>There is a very famous question, “What happened when you input a URL and press Enter in the browser?” </p>
<h1 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h1><h2 id="1-URL-parsing"><a href="#1-URL-parsing" class="headerlink" title="1. URL parsing"></a>1. URL parsing</h2><p>When you input a URL in the browser, the browser will parse the URL into several parts:</p>
<ul>
<li>Protocol: <code>http</code> or <code>https</code></li>
<li>Host&#x2F;Domain: <code>www.example.com</code></li>
<li>Port: <code>80</code> or <code>443</code></li>
<li>Path: <code>/page.html</code></li>
<li>Query: <code>?name=Philip</code></li>
<li>Fragment: <code>#section1</code></li>
</ul>
<h2 id="2-DNS-lookup"><a href="#2-DNS-lookup" class="headerlink" title="2. DNS lookup"></a>2. DNS lookup</h2><p>The browser will check the cache to see if the DNS lookup result is cached. If not, it will send a DNS query to the DNS server to get the IP address of the host.</p>
<ol>
<li>Check browser cache.</li>
<li>Check OS cache.</li>
<li>Check router cache.</li>
<li>Check ISP(Internet Service Provider) cache.</li>
<li>Make request to the DNS server.(Only if all cache above failed!)</li>
</ol>
<h2 id="3-TCP-connection"><a href="#3-TCP-connection" class="headerlink" title="3. TCP connection"></a>3. TCP connection</h2><p>The browser will establish a TCP connection with the server using the IP address and port number. This including the TCP handshake process. 关于TCP的连接与关闭，可以看<a target="_blank" rel="noopener" href="https://zdd.github.io/2024/02/19/tcp-open-and-close/">这篇</a></p>
<h2 id="4-HTTP-request"><a href="#4-HTTP-request" class="headerlink" title="4. HTTP request"></a>4. HTTP request</h2><p>The browser will send an HTTP request to the server. The request includes the following information:</p>
<ul>
<li>Request method: <code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>DELETE</code>, etc.</li>
<li>Request headers: <code>User-Agent</code>, <code>Accept</code>, <code>Cookie</code>, etc.</li>
<li>Request body: for <code>POST</code> and <code>PUT</code> requests.</li>
<li>URL: <code>http://www.example.com/page.html?name=Philip#section1</code></li>
</ul>
<h2 id="5-Server-processing"><a href="#5-Server-processing" class="headerlink" title="5. Server processing"></a>5. Server processing</h2><p>The server will process the request and generate a response. The response includes the following information:</p>
<ul>
<li>Status code: <code>200</code>, <code>404</code>, <code>500</code>, etc.</li>
<li>Response headers: <code>Content-Type</code>, <code>Content-Length</code>, etc.</li>
<li>Response body: HTML, CSS, JavaScript, etc.</li>
<li>Cookies: <code>Set-Cookie</code> header.</li>
</ul>
<h2 id="6-Browser-rendering"><a href="#6-Browser-rendering" class="headerlink" title="6. Browser rendering"></a>6. Browser rendering</h2><p>The browser will render the response HTML, CSS, and JavaScript to display the web page to the user. When browser parse html page, it may download js file embed in html, this process might block the parsing, see <a target="_blank" rel="noopener" href="https://zdd.github.io/2024/01/09/async-vs-defer/">here</a> for details.</p>
<ol>
<li>Parse HTML: The browser will parse the HTML to create the DOM tree.<ol>
<li>The file was transferred from the server to the browser as binary data.</li>
<li>The browser will parse the binary data to the .html file.</li>
<li>The browser constructs the DOM tree based on the parsed HTML.</li>
<li>If the html contains external CSS files, the browser will download the css in parallel, this won’t block the DOM construction.</li>
<li>If the html contains external JavaScript files, the browser will download the js in parallel, this will&#x2F;won’t block the DOM construction. see <a target="_blank" rel="noopener" href="https://zdd.github.io/2024/01/09/async-vs-defer/">here</a> for details.</li>
</ol>
</li>
<li>Parse CSS: The browser will parse the CSS to create the CSSOM tree.</li>
<li>Render tree: The browser will combine the DOM tree and CSSOM tree to create the render tree.</li>
<li>Layout: The browser will calculate the position and size of each element in the render tree.</li>
<li>Paint: The browser will paint the pixels on the screen.</li>
<li>Composite: The browser will composite the layers to display the final web page.</li>
<li>JavaScript execution: The browser will execute the JavaScript code to add interactivity to the web page.</li>
<li>Event handling: The browser will handle user events like click, scroll, etc.</li>
</ol>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><ol>
<li>External CSS doesn’t block the DOM construction, but might block the render tree construction since the browser needs to wait for the CSSOM tree to be constructed.</li>
<li>External JavaScript might block the DOM construction if and only if:<ol>
<li>The Scripts is in <code>&lt;head&gt;</code> tag, it will block the DOM construction.</li>
<li>And the script doesn’t set <code>async</code> or <code>defer</code>.</li>
</ol>
</li>
<li>If the script is at the end of the <code>&lt;body&gt;</code> tag, it won’t block the DOM construction even when it doesn’t set <code>async</code> or <code>defer</code>.</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/12/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><span class="page-number current">13</span><a class="page-number" href="/page/14/">14</a><span class="space">&hellip;</span><a class="page-number" href="/page/33/">33</a><a class="extend next" rel="next" href="/page/14/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Philip Zhang</p>
  <div class="site-description" itemprop="description">青春都一餉，忍把浮名換了代碼輕狂。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">321</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">40</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">440</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Philip Zhang</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Symbols count total">212k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">12:51</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MRKXK1S1GG"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-MRKXK1S1GG');
</script>
</body>
</html>
